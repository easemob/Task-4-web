<!--
 * @Author: kincaid
 * @Date: 2021-08-07 23:37:10
 * @LastEditors: kincaid
 * @LastEditTime: 2021-08-11 00:05:53
 * @Description: file content
-->
<template>
  <div class="Home">
    <header class="header">
    ÁéØ‰ø° MQTT Ê∂àÊÅØ‰∫ëÔºàÂΩìÂâçÂú®Á∫øÔºö{{count}}Ôºâ
    </header>
    <div class="content">
      <div class="left">
        <Left :list="list" ref="LeftRank"></Left>
      </div>
      <div class="middle">
        <Middle ref="Middle" :list='list' @updateraise="setRaise"  @updatelove="setLove"></Middle>
      </div>
      <div class="right">
        <Right @updateList="updateList" ref="Right" @getCount='getCount' :list='list'></Right>
      </div>
    </div>
    </div>
</template>

<script>
import Left from '../components/Left.vue'
import Middle from '../components/Middle.vue'
import Right from '../components/Right.vue'
import Mqtt  from '../utils/im'

export default {
  mixins: [Mqtt],
  components:{Left,Right,Middle},
  data(){
    return{
      count: 0,
       list: [
        {
          name: "Ëøò‰∏ç‰ºöHookÔºü‰∏Ä‰ªΩReact HookÂ≠¶‰π†Á¨îËÆ∞",
          count: 599,
          info:'Hook ÊòØ React 16.8.0 ÁâàÊú¨Â¢ûÂä†ÁöÑÊñ∞ÁâπÊÄßÔºåÂèØ‰ª•Âú®ÂáΩÊï∞ÁªÑ‰ª∂‰∏≠‰ΩøÁî® state ‰ª•ÂèäÂÖ∂‰ªñÁöÑ React ÁâπÊÄß„ÄÇ',
          url: "https://imgeek.org/article/825358054"
        },
        {
          name: "JAVAÈù¢ÂêëÂØπË±°ÁÆÄ‰ªã",
          count: 592,
          info:'JavaÊòØ‰∏ÄÁßçÈù¢ÂêëÂØπË±°ÁöÑÁ®ãÂ∫èËÆæËÆ°ËØ≠Ë®ÄÔºå‰∫ÜËß£Èù¢ÂêëÂØπË±°ÁöÑÁºñÁ®ãÊÄùÊÉ≥ÂØπ‰∫éÂ≠¶‰π†JavaÂºÄÂèëÁõ∏ÂΩìÈáçË¶Å„ÄÇ',
          url: 'https://imgeek.org/article/825358049'
        },
        {
          name: "iOS ÁªÑ‰ª∂ÂåñÊñπÊ°à",
          count: 321,
          info: '‰∏∫‰ªÄ‰πàË¶ÅÁªÑ‰ª∂ÂåñÔºüÊòìÁßªÊ§ç„ÄÅÊòìÁª¥Êä§„ÄÅÊòìÈáçÊûÑ„ÄÅÊòìÊ†πÊçÆ‰∏öÂä°ÂÅöÂä†ÂáèÊ≥ï„ÄÅÊòìÂºÄÂèë',
          url: 'https://imgeek.org/article/825358044'
        },
        {
          name: "OC‰∏éSwift APIÁöÑ‰∫§‰∫í",
          count: 194,
          info: '‰∫íÁî®ÊÄßÊòØËÆ© Swift Âíå Objective-C Áõ∏Êé•ÂêàÁöÑ‰∏ÄÁßçÁâπÊÄßÔºå‰Ωø‰Ω†ËÉΩÂ§üÂú®‰∏ÄÁßçËØ≠Ë®ÄÁºñÂÜôÁöÑÊñá‰ª∂‰∏≠‰ΩøÁî®Âè¶‰∏ÄÁßçËØ≠Ë®Ä„ÄÇÂΩì‰Ω†ÂáÜÂ§áÂºÄÂßãÊää Swift ËûçÂÖ•Âà∞‰Ω†ÁöÑÂºÄÂèëÊµÅÁ®ã‰∏≠Êó∂Ôºå‰Ω†Â∫îËØ•ÊáÇÂæóÂ¶Ç‰ΩïÂà©Áî®‰∫íÁî®ÊÄßÊù•ÈáçÊñ∞ÂÆö‰πâÂπ∂ÊèêÈ´ò‰Ω†ÂÜô Cocoa Â∫îÁî®ÁöÑÊñπÊ°à„ÄÇ',
          url: 'https://imgeek.org/article/825358042',
        },
        {
          name: "‰Ω†ÂèØËÉΩ‰∏çÁü•ÈÅìÁöÑÂä®ÊÄÅÁªÑ‰ª∂Áé©Ê≥ï?",
          count: 121,
          info: 'ÂÖ∑‰ΩìÊòØÊÄé‰πàÁé©Âë¢ÔºüÂà´ÁùÄÊÄ•ÔºåÂê¨ÊàëÊÖ¢ÊÖ¢ÈÅìÊù•ÔºåÁúãÂÆåÂêé‰ºöÊÑüÊÖ®VueÁªÑ‰ª∂ËøòËÉΩËøô‰πàÁé©üê∂ÔºåËøò‰ºöÂ≠¶‰ºö‰∏Ä‰∏™StylelintÊèí‰ª∂ÔºåÈÖçÊúâDEMOÔºå‰ª•ÂèäÈöêËóèÂú®ÊúÄÂêéÁöÑÂΩ©Ëõã„ÄÇ',
          url: 'https://imgeek.org/article/825358019',
        },
      ],
    }
  },
  mounted(){
    // this.getAccessToken()
    // console.log(Mqtt);
    // let that = this;
    // setTimeout(() => {
    //   that.MQTTconnect();
    // }, 1500);
  },
  methods:{
    updateList(opt){
      console.log(opt);
      this.list = opt
    },
    setLove(opt){
      console.log(opt)
      this.list.forEach(v => {
        if(v.name==opt){
          v.count++
        }
      });
      this.list.sort(this.compare("count"))
      let that = this
      let _list = JSON.stringify({
        type:"list",
        list: that.list
        })
      this.$refs.Right.sendMessage(_list)

    },
    setRaise(opt){
      this.list.forEach(v => {
        if(v.name==opt){
          v.count++
        }
      });
      this.list.sort(this.compare("count"))
      let that = this
      let _list = JSON.stringify({
        type:"list",
        list: that.list
        })
      this.$refs.Right.sendMessage(_list)

    },
    compare(property){
      return function(obj1,obj2){
          var value1 = obj1[property];
          var value2 = obj2[property];
          return value2 - value1;     // ÂçáÂ∫è
      }
    },
    getCount(opt){
      this.count = opt
    }
  }
}
</script>

<style scope lang="less">
.Home{
  height: 100%;
  min-width: 1440px;
}
.header{
  height: 44px;
  background: linear-gradient(167deg, #D65C99 0%, #EE6060 100%);
  color: #ffffff;
  text-align: center;
  font-size: 14px;
  line-height: 44px;
  width: 1440px;
  margin: 0 auto;
}
.content{
  display: flex;
  justify-content: space-between;
  width: 1440px;
  height: calc(100% - 44px);
  margin: 0 auto;
  .left{
    width: 292px;
    height: 100%;
    margin: 0;
    background: #F5F5F6;

  }
  .middle{
    width: 848px;
    height: 100%;
    background: #F5F5F6;
    border-left: 1px solid #E5DFDF;
    border-right: 1px solid #E5DFDF;

  }
  .right{
    width: 300px;
    height: 100%;
    background: #F5F5F6;
    }
}


</style>